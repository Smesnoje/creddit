let database = {};

database.threads = [
  {
    name: "buvljak",
    admin: "kopernikus",
    mods: ["gugladzija"],
    dateCreated: "12.09.2023",
    members: ["kopernikus", "gugladzija"],
  },
  {
    name: "politika",
    admin: "djoka33",
    mods: [],
    dateCreated: "12.09.2023",
    members: ["djoka33", "marchel0legend"],
  },
  {
    name: "fudbal",
    admin: "zidan69",
    mods: [],
    dateCreated: "12.09.2023",
    members: ["zidan69", "seksi_maradona", "kurcevitirondalno"],
  },
  {
    name: "lopate",
    admin: "plecka",
    mods: [],
    dateCreated: "12.09.2023",
    members: ["plecka", "m1ndor", "tobogan2"],
  },
  {
    name: "gatanje",
    admin: "treceoko",
    mods: [],
    dateCreated: "12.09.2023",
    members: ["treceoko", "supermama", "parabola", "galaksija100"],
  },
  {
    name: "tenkovi",
    admin: "gavrilo7",
    mods: [],
    dateCreated: "12.09.2023",
    members: ["gavrilo7", "goki", "ana893"],
  },
  {
    name: "droga",
    admin: "nark0man",
    mods: [],
    dateCreated: "12.09.2023",
    members: ["nark0man", "drogos", "pera_sluzavac", "TURBO"],
  },
];

database.posts = [
  {
    id: "0",
    thread: "politika",
    author: "djoka33",
    title: "Vucic budala",
    content:
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia  deserunt mollit anim id est laborum.",
    publishedDate: "12.09.2023",
    rating: 16,
  },
  {
    id: "1",
    thread: "droga",
    author: "nark0man",
    title: "E BURAZ",
    content:
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia  deserunt mollit anim id est laborum.",
    publishedDate: "13.06.2023",
    rating: -100,
  },
  {
    id: "2",
    thread: "fudbal",
    author: "seksi_maradona",
    title: "Kakav fail!",
    content:
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia  deserunt mollit anim id est laborum.",
    publishedDate: "13.01.2023",
    rating: 58,
  },
  {
    id: "3",
    thread: "fudbal",
    author: "kurcevitirondalno",
    title: "aj zakoljemo sudiju",
    content:
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia  deserunt mollit anim id est laborum.",
    publishedDate: "1.08.2023",
    rating: 183,
  },
  {
    id: "4",
    thread: "tenkovi",
    author: "gavrilo7",
    title: "ja jako volim tenkove :)",
    content:
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia  deserunt mollit anim id est laborum.",
    publishedDate: "99.04.2023",
    rating: 1852,
  },
  {
    id: "5",
    thread: "gatanje",
    author: "svetlanakovilovo",
    title: "1000din gledanje u dlan okolina kovilova",
    content:
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia  deserunt mollit anim id est laborum.",
    publishedDate: "13.02.2023",
    rating: -5,
  },
  {
    id: "6",
    thread: "lopate",
    author: "m1ndor",
    title: "jel prodaje neko lopatu malu kasikastu za arheologiju. nudim 20din",
    content:
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia  deserunt mollit anim id est laborum.",
    publishedDate: "1.02.2021",
    rating: -58996,
  },
  {
    id: "7",
    thread: "buvljak",
    author: "ekskalibur",
    title: "prodajem pepeo",
    content:
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia  deserunt mollit anim id est laborum.",
    publishedDate: "420.02.2021",
    rating: "infinite",
  },
];

database.comments = [
  {
    id: "0",
    postId: "6",
    thread: "lopate",
    title: "jel prodaje neko lopatu malu kasikastu za arheologiju. nudim 20din",
    author: "ljubomirlopate2023",
    content: "Imam ja kolega 22 dinara.",
    repplyTo: null,
    publishedDate: "12.09.2023",
    rating: 2,
    depth: 0,
  },
  {
    id: "1",
    postId: "6",
    thread: "lopate",
    title: "jel prodaje neko lopatu malu kasikastu za arheologiju. nudim 20din",
    author: "m1ndor",
    content: "a brt mnogo mi to aj za 2 din.",
    repplyTo: "ljubomirlopate2023",
    publishedDate: "12.09.2023",
    rating: -2,
    depth: 1,
  },
  {
    id: "2",
    postId: "6",
    thread: "lopate",
    title: "jel prodaje neko lopatu malu kasikastu za arheologiju. nudim 20din",
    author: "lopate.com",
    content: "Imamo na sajtu.",
    repplyTo: "m1ndor",
    publishedDate: "12.09.2023",
    rating: 2,
    depth: 0,
  },
  {
    id: "3",
    postId: "4",
    thread: "tenkovi",
    title: "ja jako volim tenkove :)",
    author: "milanEKSODIJA",
    content: "JA MNOGO VOLIM DA SEIGRAM SA TENKOVIMA",
    repplyTo: null,
    publishedDate: "12.09.2023",
    rating: 2,
    depth: 0,
  },
  {
    id: "4",
    postId: "4",
    thread: "tenkovi",
    title: "ja jako volim tenkove :)",
    author: "wotBOG",
    content: "NUBOVIIII.",
    repplyTo: "milanEKSODIJA",
    publishedDate: "12.09.2023",
    rating: -2,
    depth: 1,
  },
  {
    id: "5",
    postId: "0",
    thread: "politika",
    title: "Vucic budala",
    author: "marchel0legend",
    content: "Jebem ti drzawu...",
    repplyTo: null,
    publishedDate: "12.09.2023",
    rating: 2,
    depth: 0,
  },
  {
    id: "6",
    postId: "0",
    thread: "politika",
    title: "Vucic budala",
    author: "djoka33",
    content: "exercitation ullamco labori",
    repplyTo: "marchel0legend",
    publishedDate: "12.09.2023",
    rating: 12,
    depth: 1,
  },
  {
    id: "7",
    postId: "0",
    thread: "politika",
    title: "Vucic budala",
    author: "kecanje",
    content: "jebem ti mater",
    repplyTo: "djoka33",
    publishedDate: "12.09.2023",
    rating: 4,
    depth: 2,
  },
];

database.users = [
  {
    name: "ekskalibur",
    password: "macupicku123",
    mail: "dragonslayer22@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "djoka33",
    password: "animefeet69",
    mail: "djoka33@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "kopernikus",
    password: "jugoslavija",
    mail: "lipecvatu45@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "gugladzija",
    password: "hemijskidirektor123",
    mail: "heygo0gle@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "marchel0legend",
    password: "svetibol",
    mail: "nikomenerazume@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "zidan69",
    password: "glavauzid",
    mail: "zinedinz66@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "seksi_maradona",
    password: "lakokaina420",
    mail: "loptajeokrugla@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "kurcevitirondalno",
    password: "suiiiiiiii",
    mail: "dajgol@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "seksimaradona",
    password: "lakokaina421",
    mail: "opetmaradona@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "m1ndor",
    password: "arheologija",
    mail: "vetrenjacapancevo@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "ljubomirlopate2023",
    password: "lopatete",
    mail: "ljubomirlopate2023@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "lopate.rs",
    password: "sr.etapol",
    mail: "ljubomirlobate2024@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "treceoko",
    password: "mojtespopao",
    mail: "sigmatikus98@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "gavrilo7",
    password: "gavra_77",
    mail: "hvalatitata123@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "milanEKSODIJA",
    password: "srceukartama",
    mail: "kidanjejebote88@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "wotBOG",
    password: "russijaZ",
    mail: "putinfan93@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
  {
    name: "nark0man",
    password: "trava",
    mail: "trava44462@gmail.com",
    profilePicture:
      "https://ichef.bbci.co.uk/news/1024/cpsprodpb/13FCD/production/_130896818_donaldtrumpfullmugshot.jpg",
  },
];

database.createUser = (username, password) => {
  database.users.push({
    username: username,
    password: password,
  });
};

database.createThread = (name, admin) => {
  database.threads.push({
    name: name,
    admin: admin,
    mods: [],
    dateCreated: "12.09.2023",
    members: [admin],
  });
};

database.addThreadMember = (thread, member) => {
  const index = database.thread.findIndex((thread) => thread.name === thread);

  database.thread[index].members.push(member);
};

database.createPost = (author, thread, title, content) => {
  database.posts.push({
    id: Math.random().toString(),
    thread: thread,
    author: author,
    title: title,
    content: content,
    comments: [],
  });
};

database.createComment = (postId, author, comment, id = undefined) => {
    let originalComment;
    if (id) {
        originalComment = database.comment.find((comment) => {
            return database.comment.id === id
        })
    }
    database.comments.push(
        {
            id: Math.random().toString(),
            postId: postId,
            author: author,
            content: comment,
            repplyTo: id ? originalComment.author : null,
            publishedDate: "12.09.2023",
            rating: 0,
            depth: id ? ++originalComment.depth : 0
        }
    )
}

database.deleteComment = (id) => {
  database.comments = database.comments.filter((comment) => comment.id !== id);
};

database.deletePost = (title) => {
  database.posts = database.posts.filter((post) => post.title !== title);
};

database.getPost = (title) => {
  return database.posts.filter((post) => post.title === title);
};

database.getThreadPosts = (thread) => {
  return database.posts.filter((post) => post.thread === thread);
};

database.getPostComments = (id) => {
    return database.comments.filter(comment => comment.postId === id)
}

database.getUserPosts = (user) => {
  return database.posts.filter((post) => post.author === user);
};

database.getUserComments = (user) => {
  return database.comments.filter((comment) => comment.author === user);
};

database.getUserThreads = (user) => {
  return database.threads.filter(
    (thread) => thread.admin === user || thread.mods.has(user)
  );
};

database.login = (username, password) => {
    console.log(username, password)
  let currentUser = database.users.find((user) => user.name === username);
  if (currentUser) {
    if (currentUser.password === password) {
      console.log(currentUser.name + " logged in");
      return currentUser.name;
    } else {
      console.log("Check your credentials");
    }
  } else {
    console.log("No such users");
    return false;
  }
};
export default database;
